<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configure systems to mount file systems at or during boot - Linux Foundation Certified System Administrator (LFCS) Exam Personal Notes </title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Linux Foundation Certified System Administrator (LFCS) Exam Personal Notes </h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/giulianopz/lfcs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/giulianopz/lfcs/edit/main/domains/6-storage-management/d.md " title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="configure-systems-to-mount-file-systems-at-or-during-boot"><a class="header" href="#configure-systems-to-mount-file-systems-at-or-during-boot">Configure systems to mount file systems at or during boot</a></h2>
<p>There are broadly two aproaches:</p>
<ul>
<li>per-user mounting (usually under /media)</li>
<li>systemwide mounting (anywhere, often under /mnt)</li>
</ul>
<h3 id="1-per-user-mounting"><a class="header" href="#1-per-user-mounting">1. Per-user mounting</a></h3>
<p>Per-user mounting does not require root access, it's just automating the desktop interface. Systemwide mounts (/etc/fstab) can allow access from before login, and are therefore much more suitable for access through a network, or by system services.</p>
<p>When you mount a disc normally with the file browser (e.g. Nautilus) it mounts disks by interacting with <strong>udisks</strong> behind the scenes. You can do the same thing on the command line with the udisks tool.</p>
<h3 id="2-systemwide-mounting"><a class="header" href="#2-systemwide-mounting">2. Systemwide mounting</a></h3>
<p>Unlike DOS or Windows (where this is done by assigning a drive letter to each partition), Linux uses a unified directory tree where each partition is mounted at a mount point in that tree.</p>
<p>A <strong>mount point</strong> is a directory that is used as a way to access the filesystem on the partition, and mounting the filesystem is the process of associating a certain filesystem with a specific directory in the directory tree.</p>
<p>When providing just one parameter (either mout point or device) to the <strong>mount</strong> command, it will read the content of the /etc/fstab configuration file to check whether the specified file system is listed or not.</p>
<p>Usually when mounting a device with a common file system such as ext4 or xfs the mount command will auto-detect the file system type. However, some file systems are not recognized and need to be explicitly specified.</p>
<p>Use the -t option to specify the file system type: <code>mount -t &lt;fs-type&gt; &lt;device&gt; &lt;mount-point&gt;</code></p>
<p>To specify additional mount options , use the -o option: <code>mount -o &lt;options&gt; &lt;device&gt; &lt;mount-point&gt;</code></p>
<p>Multiple options can be provided as a comma-separated list.</p>
<p>The /etc/fstab file contains lines of the form <code>&lt;device&gt; &lt;location&gt; &lt;Linux type&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt;</code>. Every element in this line is separated by whitespace (spaces and tabs):</p>
<pre><code># /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;
# / was on /dev/sda2 during installation
UUID=a2db89ed-d599-4138-8838-0b950b6c3fbb /               ext4    errors=remount-ro 0       1
# /boot/efi was on /dev/sda1 during installation
UUID=AEF0-9F26  /boot/efi       vfat    defaults        0       1
# swap was on /dev/sda3 during installation
UUID=df17fdb9-57a4-4302-856e-3cd656848355 none            swap    sw              0       0
</code></pre>
<p>The first three fields are quite self-explanatory, while the others deserve a lenghtier explanation:</p>
<ul>
<li>
<p><strong>options</strong>: the fourth field, (fs_mntops), describes the mount options associated with the filesystem.</p>
<p>It is formatted as a comma separated list of options. It contains at least the type of mount plus any additional options appropriate to the filesystem type. For documentation on the available options for non-nfs file systems, see mount(8). For documention on all nfs-specific options have a look at nfs(5). Common for all types of file system are the options <code>noauto</code> (do not mount when <code>mount -a</code> is given, e.g., at boot time), <code>user</code> (allow a user to mount), and <code>owner</code> (allow device owner to mount), and <code>comment</code> (e.g., for use by fstab-maintaining programs). The <code>owner</code> and <code>comment</code> options are Linux-specific. For more details, see mount(8).</p>
<p>Most frequently used mount options include:</p>
<ul>
<li><code>async</code>: allows asynchronous I/O operations on the file system being mounted</li>
<li><code>auto</code>: marks the file system as enabled to be mounted automatically using <code>mount -a</code>. It is the opposite of noauto</li>
<li><code>defaults</code>: this option is an alias for <code>async,auto,dev,exec,nouser,rw,suid</code></li>
</ul>
<blockquote>
<p>Note: Multiple options must be separated by a comma without any spaces. If by accident you type a space between options, mount will interpret the subsequent text string as another argument</p>
</blockquote>
<ul>
<li><code>loop</code>: mounts an image (an .iso file, for example) as a loop device</li>
</ul>
<blockquote>
<p>Tip: This option can be used to simulate the presence of the disk's contents in an optical media reader</p>
</blockquote>
<ul>
<li><code>noexec</code>: prevents the execution of executable files on the particular filesystem (the opposite of <code>exec</code>)</li>
<li><code>nouser</code>: prevents any users (other than root) to mount and unmount the filesystem (the opposite of <code>user</code>)</li>
<li><code>remount</code>: mounts the filesystem again in case it is already mounted</li>
<li><code>ro</code>: mounts the filesystem as read only</li>
<li><code>rw</code>: mounts the file system with read and write capabilities</li>
<li><code>relatime</code>: makes access time to files be updated only if atime is earlier than mtime</li>
<li><code>user_xattr</code>: allow users to set and remote extended filesystem attributes</li>
</ul>
</li>
<li>
<p><strong>dump</strong>: the fifth field, (fs_freq), is used for these filesystems by the dump(8) command to determine which filesystems need to be dumped. If the fifth field is not present, a value of zero is returned and dump will assume that the filesystem does not need to be dumped.</p>
</li>
<li>
<p><strong>pass</strong>: the sixth field, (fs_passno), is used by the fsck(8) program to determine the order in which filesystem checks are done at reboot time. The root filesystem should be specified with a fs_passno of 1, and other filesystems should have a fs_passno of 2. Filesystems within a drive will be checked sequentially, but filesystems on different drives will be checked at the same time to utilize parallelism available in the hardware. If the sixth field is not present or zero, a value of zero is returned and fsck will assume that the filesystem does not need to be checked.</p>
</li>
</ul>
<p>So, to mount a filesystem/partition at boot, a common configuration is:
<code>UUID=&lt;uuid&gt; &lt;mount-point&gt; &lt;fs-type&gt; defaults 0 0</code></p>
<p>Before you reboot the machine, you need to test your new fstab entry. Issue the following command to mount all filesystems mentioned in fstab:
<code>sudo mount -a</code></p>
<p>Check if your filesystem was properly mounted:
<code>mount | grep &lt;mount-point&gt;</code></p>
<p>If you see no errors, the fstab entry is correct and you're safe to reboot.</p>
<hr />
<h3 id="mounting-iso-files"><a class="header" href="#mounting-iso-files">Mounting ISO Files</a></h3>
<p>You can mount an ISO file using the loop device which is a special pseudo-device that makes a file accessible as a block device.</p>
<p>Start by creating the mount point, it can be any location you want: <code>sudo mkdir /media/iso</code></p>
<p>Mount the ISO file to the mount point by typing the following command:
<code>sudo mount /path/to/image.iso /media/iso -o loop</code></p>
<p>A common use case is when you want to use a loopback file in place of a fresh new partition for testing purposes:</p>
<pre><code>sudo dd if=/dev/zero of=/imagefile bs=1M count=250
sudo mkfs -t ext4 -b 4096 -v /imagefile
sudo mkdir /mnt/tempdir
sudo mount -o loop /imagefile /mnt/tempdir 
mount | grep tempdir
&gt;/dev/loopX on /mnt/tempdir type ext4 (rw,relatime,seclabel,data=ordered)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../6-storage-management/c.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../6-storage-management/e.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../6-storage-management/c.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../6-storage-management/e.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
